
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Merchant/Views/Shared/_RetailerLayout.cshtml";
}


<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<script src="~/Areas/Merchant/MerchantHelperJS/FlightBooking/app.js"></script>
<script src="~/Areas/Merchant/MerchantHelperJS/FlightBooking/AirportAutocomplete.js"></script>
<div class="content" style="margin-top:20px;">
    <div class="display-animation" ng-app="AirportAutocompleteoduleApp" ng-controller="AirportAutocompleteController" id="AirportAutocompleteController">
        <div class="full-content margin-bottom-40 bg-white" id="Bill_page">
            <form role="form" ng-submit="SerachFlights()" ng-show="formdisplay">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row justify-content-md-center">
                                    <div class="col-md-auto">
                                        <div class="btn-group">
                                            <label class="btn btn-primary" style="width:180px" ng-model="Airport.Tripmode" uib-btn-radio="'1'" uncheckable>One Way</label>
                                            <label class="btn btn-primary" style="width:180px" ng-model="Airport.Tripmode" uib-btn-radio="'2'" uncheckable>Round Trip</label>
                                            <label class="btn btn-primary" style="width:180px" ng-disabled="true" ng-model="Airport.Tripmode" uib-btn-radio="'3'" uncheckable>Multi City</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-8">
                                        <hr />
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-4 ">
                                        <div class="form-group">
                                            <label>From</label>
                                            <div angucomplete-alt id="txtAutocomplete" placeholder="Type airport name" pause="100"
                                                 selected-object="SelectedAirport" local-data="Airports" search-fields="CITYNAME" ng-model="Airport.AirportsName"
                                                 title-field="CITYNAME" minlength="1" input-class="form-control" match-class="highlight">
                                            </div>
                                            <input type="hidden" id="AirportCode" ng-model="SelectedAirport.CITYCODE" />
                                            <div ng-hide="SelectedAirport">
                                                {{SelectedAirport.CITYCODE}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label>To</label>
                                            <div angucomplete-alt id="txtTOAutocomplete" placeholder="Type airport name" pause="100"
                                                 selected-object="ToAirportName" local-data="Airports" search-fields="CITYNAME" ng-model="Airport.ToAirportsName"
                                                 title-field="CITYNAME" minlength="1" input-class="form-control" match-class="highlight">
                                            </div>
                                            <div ng-hide="ToAirportName">
                                                {{ToAirportName.CITYCODE}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-4 ">
                                        <div class="form-group">
                                            <label>Departing</label>
                                            <input type="text" name="FromDate" id="datepickerFromDate" class="form-control fromdateVal" placeholder="From Date" ng-model="FromDate" autocomplete="off" />
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="form-group">
                                            <label>Return</label>
                                            <input type="text" name="ToDate" id="datepickerToDate" class="form-control ToDateVal" placeholder="To Date" ng-change="setToDate()" ng-model="ToDate" ng-disabled="Airport.Tripmode==1" autocomplete="off" />
                                        </div>
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-2">
                                        <div class="form-group">
                                            <label>Adults</label>
                                            <select id="ddlTravalAdultType" style="width:100%" class="form-control" ng-model="adultTypeTrv">
                                                <option selected value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-2">
                                        <div class="form-group">
                                            <label>Children</label>
                                            <select id="ddlTravalChildType" style="width:100%" class="form-control" ng-model="ChildTypeTrv">
                                                <option value="">Number of Child</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="form-group">
                                            <label>Infants</label>
                                            <select id="ddlTravalInfantType" style="width:100%" class="form-control" ng-model="InfantTypeTrv">
                                                <option value="">Number of Infant</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-2">
                                        <div class="form-group">
                                            <label>Class</label>
                                            <select id="ddlTravalType" style="width:100%" class="form-control" ng-model="TravellType">
                                                <option value="Y">Economy</option>
                                                <option value="C">Business</option>
                                                <option value="W">Premium Economy</option>
                                                <option value="F">First Class</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-8">
                                        <hr />
                                    </div>
                                </div>
                                <div class="row justify-content-md-center">
                                    <div class="col-8 text-center">
                                        <button type="submit" class="btn btn-danger btn-lg">Search Flight</button>
                                    </div>
                                </div>
                            </div>
                            </div>
                    </div>
              

                </div>



                
            </form>
        </div>
    </div>
</div>

@*<div id="popover-content-popover-passengers" class="hide">
    <div class="form-group">
        <label class="col-lg-7">Adult(18-64)</label>
        <div class="input-group col-lg-5">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" value=" - " ng-disabled="objListing.travels[0].AirTravellers.AirAdult==1" ng-click="objListing.travels[0].AirTravellers.AirAdult=objListing.travels[0].AirTravellers.AirAdult-1" />
            </span>
            <input type="text" class="form-control" ng-model="objListing.travels[0].AirTravellers.AirAdult" readonly placeholder="0">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" value=" + " ng-click="objListing.travels[0].AirTravellers.AirAdult=objListing.travels[0].AirTravellers.AirAdult+1" />
            </span>
        </div>
    </div>
    <div class="form-group">
        <label class="col-lg-7">Children(2-17)</label>
        <div class="input-group col-lg-5">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" ng-disabled="objListing.travels[0].AirTravellers.AirChildren==0" value=" - " ng-click="objListing.travels[0].AirTravellers.AirChildren=objListing.travels[0].AirTravellers.AirChildren-1" />
            </span>
            <input type="text" class="form-control" ng-model="objListing.travels[0].AirTravellers.AirChildren" readonly placeholder="0">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" value=" + " ng-click="objListing.travels[0].AirTravellers.AirChildren=objListing.travels[0].AirTravellers.AirChildren+1" />
            </span>
        </div>
    </div>

    <div class="form-group">
        <label class="col-lg-7">Infant(under 2)</label>
        <div class="input-group col-lg-5">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" value=" - " ng-disabled="objListing.travels[0].AirTravellers.AirInfant==0" ng-click="objListing.travels[0].AirTravellers.AirInfant=objListing.travels[0].AirTravellers.AirInfant-1" />
            </span>
            <input type="text" class="form-control" value="{{objListing.travels[0].AirTravellers.AirInfant}}" ng-model="objListing.travels[0].AirTravellers.AirInfant" readonly placeholder="0">
            <span class="input-group-btn">
                <input type="button" class="btn btn-secondary" value=" + " ng-click="objListing.travels[0].AirTravellers.AirInfant=objListing.travels[0].AirTravellers.AirInfant+1" />
            </span>
        </div>
    </div>

</div>*@
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<script>
    //$(function () {
    //    $('#datepickerFromDate').datepicker({
    //        format: "dd-MM-yyyy",
    //        language: "es",
    //        autoclose: true,
    //        todayHighlight: true,
    //        changeMonth: true,
    //        changeYear: true
    //    });
    //    $('#datepickerToDate').datepicker({
    //        format: "dd-MM-yyyy",
    //        language: "es",
    //        autoclose: true,
    //        todayHighlight: true,
    //        changeMonth: true,
    //        changeYear: true
    //    });
    //});


    //document.addEventListener('DOMContentLoaded', function () {
    //    $('#pophover-passengers').removeClass('hidden');
    //}, false);


    //$(document).click(function (event) {
    //    var travell = $(event.target).parents('.numoftraveller').length;

    //    if ($('.numoftraveller').find('.popover').hasClass('in')) {
    //        $('.trigger').trigger('click');
    //    }



    //});
    //$('body').on('click', function (e) {
    //    if ($(e.target).data('toggle') !== 'popover'
    //        && $(e.target).parents('[data-toggle="popover"]').length === 0
    //        && $(e.target).parents('.popover.in').length === 0) {
    //        $('[data-toggle="popover"]').popover('hide');
    //    }
    //});
    //$('body').on('click', function (e) {
    //    $('.homepopover').each(function () {
    //        if ($(this).attr('aria-describedby') != null) {
    //            var id = $(this).attr('aria-describedby');
    //            if (!$(e.target).closest(".popover-content").length && $(e.target).attr("aria-describedby") != id && !$(e.target).closest('[aria-describedby="' + id + '"').length) {  /* --------- Look if the click is a child of the popover box or if it's the button itself or a child of the button ---------- */
    //                $('[aria-describedby="' + id + '"]').trigger("click");
    //            }
    //        }
    //    });
    //});

    //$(window).on('load', function () {
    //    $("[data-toggle*='dropdown']").each(function () {
    //        var html = $(this).html();
    //        $(this).html(html.replace(/&nbsp;/g, ''));
    //    });
    //});


 

    //jQuery.noConflict();
    //(function ($) {
    //    $('.fromdate').datepicker({
    //        startDate: new Date(),
    //        //format: 'dd M, D',
    //        format: 'yyyy-MM-dd',
    //        autoclose: true
    //    }).on('changeDate', function (e) {
    //        $('.ToDate').val('');
    //        var minDate = new Date(e.date);
    //        $('.ToDate').datepicker('remove');
    //        $('.ToDate').datepicker({
    //            //format: 'dd M, D',
    //            format: 'yyyy-MM-dd',
    //            autoclose: true,
    //            startDate: minDate
    //        });
    //    }); 
    //    //$('.Multifromdate').datepicker({
    //    //    startDate: new Date(),
    //    //    format: 'yyyy-MM-dd',
    //    //    autoclose: true
    //    //});
    //})(jQuery);
    //jQuery.noConflict();
    //(function ($) {
    //    //$('.MulticityDate').datepicker({
    //    //    startDate: new Date(),
    //    //    format: 'dd M, D',
    //    //    autoclose: true
    //    //});
    //})(jQuery);


    jQuery.noConflict();
    $(document).ready(function () {
        (function ($) {            
            $('.fromdateVal').datepicker({
                startDate: new Date(),
                //dateFormat: "yy-mm-dd",
                //format: 'yyyy-MM-dd',
                dateFormat: "yy-mm-dd",
                uiLibrary: 'bootstrap4',
                minDate: 0,
                autoclose: true
            }).on('changeDate', function (e) {
                debugger;
                $('.ToDateVal').val('');
                var minDate = new Date(e.date);
                $('.ToDateVal').datepicker('remove');                
                $('.ToDateVal').datepicker({                    
                    format: 'yyyy-MM-dd',                    
                    //dateFormat: "yy-mm-dd",
                    //format: 'yyyy-MM-dd',
                    autoclose: true,
                    startDate: minDate
                });
            });
            $('.ToDateVal').datepicker({
                //startDate: new Date(),
                dateFormat: "yy-mm-dd",
                uiLibrary: 'bootstrap4',
                minDate: 0,
                autoclose: true
            });
        })(jQuery);
        jQuery.noConflict();
        (function ($) {
            //$('.MulticityDate').datepicker({
            //    startDate: new Date(),
            //    format: 'dd M, D',
            //    autoclose: true
            //});
        })(jQuery);
    });


   
</script>

